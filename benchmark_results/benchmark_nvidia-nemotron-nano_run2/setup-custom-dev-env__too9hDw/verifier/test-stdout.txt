Collecting pytest==8.4.1
  Downloading pytest-8.4.1-py3-none-any.whl.metadata (7.7 kB)
Collecting iniconfig>=1 (from pytest==8.4.1)
  Downloading iniconfig-2.3.0-py3-none-any.whl.metadata (2.5 kB)
Collecting packaging>=20 (from pytest==8.4.1)
  Downloading packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
Collecting pluggy<2,>=1.5 (from pytest==8.4.1)
  Downloading pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
Collecting pygments>=2.7.2 (from pytest==8.4.1)
  Downloading pygments-2.19.2-py3-none-any.whl.metadata (2.5 kB)
Downloading pytest-8.4.1-py3-none-any.whl (365 kB)
Downloading pluggy-1.6.0-py3-none-any.whl (20 kB)
Downloading iniconfig-2.3.0-py3-none-any.whl (7.5 kB)
Downloading packaging-25.0-py3-none-any.whl (66 kB)
Downloading pygments-2.19.2-py3-none-any.whl (1.2 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 16.4 MB/s  0:00:00
Installing collected packages: pygments, pluggy, packaging, iniconfig, pytest

Successfully installed iniconfig-2.3.0 packaging-25.0 pluggy-1.6.0 pygments-2.19.2 pytest-8.4.1
============================= test session starts ==============================
platform linux -- Python 3.13.11, pytest-8.4.1, pluggy-1.6.0
rootdir: /tests
collected 7 items

../tests/test_outputs.py .FF..FF                                         [100%]

=================================== FAILURES ===================================
__________________________ test_zsh_is_default_shell ___________________________

    def test_zsh_is_default_shell():
        """Test that zsh is set as the default shell for root user."""
        result = subprocess.run(
            ["getent", "passwd", "root"], capture_output=True, text=True
        )
        print(f"[DEBUG] getent passwd root result: {result.stdout.strip()}")
        assert result.returncode == 0, "Failed to run 'getent passwd root' command"
>       assert "/zsh" in result.stdout, (
            f"Default shell is not zsh. getent passwd root output: {result.stdout.strip()}"
        )
E       AssertionError: Default shell is not zsh. getent passwd root output: root:x:0:0:root:/root:/bin/bash
E       assert '/zsh' in 'root:x:0:0:root:/root:/bin/bash\n'
E        +  where 'root:x:0:0:root:/root:/bin/bash\n' = CompletedProcess(args=['getent', 'passwd', 'root'], returncode=0, stdout='root:x:0:0:root:/root:/bin/bash\n', stderr='').stdout

/tests/test_outputs.py:22: AssertionError
----------------------------- Captured stdout call -----------------------------
[DEBUG] getent passwd root result: root:x:0:0:root:/root:/bin/bash
__________________________ test_ohmyzsh_is_installed ___________________________

    def test_ohmyzsh_is_installed():
        """Test that Oh My Zsh is properly installed."""
        result = subprocess.run(
            ["zsh", "-c", "source /root/.zshrc; omz version"],
            capture_output=True,
            text=True,
        )
        print(f"[DEBUG] omz version result: {result.stdout.strip()}")
>       assert result.returncode == 0, (
            f"Failed to run 'omz version' command. "
            f"omz version output: {result.stdout.strip()}"
        )
E       AssertionError: Failed to run 'omz version' command. omz version output: 
E       assert 127 == 0
E        +  where 127 = CompletedProcess(args=['zsh', '-c', 'source /root/.zshrc; omz version'], returncode=127, stdout='', stderr='/root/.zsh...such file or directory: $ZSH/oh-my-zsh.sh\n/root/.zshrc:38: command not found: conda\nzsh:1: command not found: omz\n').returncode

/tests/test_outputs.py:35: AssertionError
----------------------------- Captured stdout call -----------------------------
[DEBUG] omz version result: 
______________________________ test_conda_in_zsh _______________________________

    def test_conda_in_zsh():
        """Test that conda is properly initialized and available in zsh."""
        result = subprocess.run(
            ["zsh", "-c", "source /root/.zshrc; conda --version"],
            capture_output=True,
            text=True,
        )
        print(f"[DEBUG] conda command result: {result.stdout.strip()}")
>       assert result.returncode == 0, "error when running `conda --version` in zsh"
E       AssertionError: error when running `conda --version` in zsh
E       assert 127 == 0
E        +  where 127 = CompletedProcess(args=['zsh', '-c', 'source /root/.zshrc; conda --version'], returncode=127, stdout='', stderr='/root/...ch file or directory: $ZSH/oh-my-zsh.sh\n/root/.zshrc:38: command not found: conda\nzsh:1: command not found: conda\n').returncode

/tests/test_outputs.py:88: AssertionError
----------------------------- Captured stdout call -----------------------------
[DEBUG] conda command result: 
______________________________ test_conda_in_bash ______________________________

    def test_conda_in_bash():
        """Test that conda is properly initialized and available in bash."""
        result = subprocess.run(
            ["bash", "-ic", "conda --version"], capture_output=True, text=True
        )
        print(f"[DEBUG] conda command result: {result.stdout.strip()}")
>       assert result.returncode == 0, "error when running `conda --version` in bash"
E       AssertionError: error when running `conda --version` in bash
E       assert 127 == 0
E        +  where 127 = CompletedProcess(args=['bash', '-ic', 'conda --version'], returncode=127, stdout='', stderr='bash: cannot set terminal...ess group (947): Inappropriate ioctl for device\nbash: no job control in this shell\nbash: conda: command not found\n').returncode

/tests/test_outputs.py:125: AssertionError
----------------------------- Captured stdout call -----------------------------
[DEBUG] conda command result: 
==================================== PASSES ====================================
______________________________ test_ohmyzsh_theme ______________________________
----------------------------- Captured stdout call -----------------------------
[DEBUG] ZSH_THEME result: apple
________________________ test_ohmyzsh_installed_plugins ________________________
----------------------------- Captured stdout call -----------------------------
[DEBUG] plugins result: git z zsh-autosuggestions zsh-syntax-highlighting
=========================== short test summary info ============================
PASSED ../tests/test_outputs.py::test_zsh_is_installed
PASSED ../tests/test_outputs.py::test_ohmyzsh_theme
PASSED ../tests/test_outputs.py::test_ohmyzsh_installed_plugins
FAILED ../tests/test_outputs.py::test_zsh_is_default_shell - AssertionError: ...
FAILED ../tests/test_outputs.py::test_ohmyzsh_is_installed - AssertionError: ...
FAILED ../tests/test_outputs.py::test_conda_in_zsh - AssertionError: error wh...
FAILED ../tests/test_outputs.py::test_conda_in_bash - AssertionError: error w...
========================= 4 failed, 3 passed in 0.05s ==========================
